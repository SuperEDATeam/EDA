### 目前绘制功能还存在的问题

##### 画布交互相关

- 导线的颜色随着通路状态变换（下一步仿真阶段要实现）

##### 画布功能相关

- 导线的cell需要重定义（首要问题）
- 元素复制粘贴（首要问题）
- 元件的控制表单还没有实现（首要问题）
- 读取文件之后拖动元件导线和元件会断开（神秘问题）
- 快捷键系统
- 元件缓存

##### 分辨率问题

- 全局高DPI适配：目前只做了画布内的高DPI适配，但是其他模块还没有做，感觉很违和。我试了一下进行全局高DPI适配，发现问题
	1. 软件掉帧严重，这和画布绘制逻辑相关，我们的软件频繁重绘整个画布，在高分辨率下效率很低。策略是使用脏矩形重绘，静态缓存背景和元件图标等方法。
	2. 位图在高DPI下尺寸被压缩严重。我们采用的图标都是(24, 24)大小的，不适用于高DPI。目前可以考虑使用**`wxBitmapBundle`**替代wxBitmap并提供高分辨率资源。

##### 布局和自定义问题

- 工具栏的重定义（首要问题）。

	在有了随手工具箱之后，工具栏的意义发生了显著变化，其主要任务不再在于工具切换。我目前的想法是：工具栏主要用于管理

	- 画布控制相关的控件：例如提供撤销按钮，提供画布背景选项(网格/点阵/画布规格)，提供对齐选项(对齐到网格，对齐到元件。。。。)，提供选择框选项（只选择元件，只选择文本，，，，）
	- 提供仿真相关控件，
	- 提供视图控制按键
	- 等等

- 增加目录树以方便项目管理

- 增加画布标签页和多画布窗口并行功能

- 为全局的文字提供统一定义的资源文件，提供不同语言的切换

	





### 11.11 进步报告

**progress**：基本实现新的拖动逻辑，元件移动与导线延长适配此逻辑

**new bug**：

1. 导线与元件连接后，导线头和元件引脚的选中仍独立
2. 创建导线时添加了两个头尾的横线的硬编码逻辑，实际上没有必要
3. 双击侧边栏之后始终处于元件放置状态，没法简单撤销状态

**new idea**：
主菜单栏增加一个view栏，转换背景，颜色等视图



### 已解决

- ~~元件从侧边栏控件放到画布上某位置时没有悬浮显示（可选）~~
- ~~导线选中之后可以移动（可选）~~
- ~~从线上还不能连出线（首要问题）~~
- ~~元件在弯折处的线会搅在一起，尤其是从输入引脚连出的线，并且搅在一起之后没法自动调整（答辩展示时可以主观上规避）~~
- ~~没有批量框选（首要问题）~~
	- ~~现在单击左键再移动对应的是拖动画布，而没有框选，要把这两个功能单独分出来（两种方案）~~
- ~~导线还不能作为一个对象选中（首要问题）~~
- ~~画布上的元素还不能删除、也没有回溯操作（首要问题）~~
- ~~id失效问题~~
- ~~元素选中~~

- ~~或门的引脚位置太靠边边了，往中间稍微移动一点点~~
- ~~引脚不要用一根短线了，改成一个圆点，输入引脚灰色（或者蓝色），输出红色~~
- ~~与非门、或非门等的圆圈改成一个稍微更大一点的空心圆圈~~
- ~~放大不能保持高清、元件的曲线的边缘锯齿明显~~
- ~~导线相互连接的连接点最好表征为一个粗圆点（首要问题）~~
- ~~元件、导线在不同状态下没有区分，比如静止状态/拖动状态/选中状态（可选）~~
